#!/usr/bin/env python
# coding:utf-8

# http://blog.csdn.net/wangtaoking1/article/details/9620967
# http://xael.org/norman/python/python-nmap/

import nmap
import json

# need install nmap in path
target_host = 'itest.info'  # test  122.248.239.69
# itest.info 192.241.214.64
target_port = '20-90'   # 20-443
nm = nmap.PortScanner()
scanner_result = nm.scan(target_host, target_port)

print json.dumps(scanner_result, indent=4)    # dict -> json